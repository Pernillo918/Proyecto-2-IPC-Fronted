<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" >
    <link rel="stylesheet"  type="text/css" href="estilos3.css">

    <script src="https://raw.githack.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
    <script src="PDF_Pacientes.js"></script>
    <script src="PDF_Enfermeras.js"></script>
    <script src="PDF_Medicamentos.js"></script>
    <script src="PDF_Medicos.js"></script>

    <title>MODULO ADMINISTRADOR</title>
  </head>
  <body onload="ObtenerPacientes(), ObtenerEnfermeras(),ObtenerDoctores(), ObtenerMedicamentos()" style="background-color: #faf8f8;">
    <center>
        <div class="badge bg-primary text-wrap" style="width: 77rem; ">
          <h1 style="padding-top: 5%;">UHospital - Modulo Administrador </h1>
        </div>
      </center>

      <b>
      
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Pacientes</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Enfermeras</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Doctores</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="medicamento-tab" data-bs-toggle="tab" data-bs-target="#medicamento" type="button" role="tab" aria-controls="medicamento" aria-selected="false">Medicamentos</button>
          </li>
          
          
        </ul>
        <div class="tab-content" id="myTabContent">

          <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">

            
            <center>
              <div style=" width: 80%;  padding-top: 10px; padding-left: 15px;">
                 <div  id="Tabla_Pacientes">
                   <br><br>
                   <h1>PACIENTES</h1>
                  <table  class="table table-hover">
                    
                    <thead>
                        <tr class="table-dark">
                            <th>Nombre </th>
                            <th>Apellido </th>
                            <th>Fecha de nacimiento </th>
                            <th>sexo </th>
                            <th>Nombre de usuario </th>
                            <th>Contraseña</th>
                            <th>Telefono</th>
                            <th>Opciones </th>
                        </tr>
                    </thead>
                    <tbody id="detalles">

                    </tbody>

                </table>
                 </div>
                
                  <div>
                    <b>
                      <button onclick="generarPDF()" type="button" class="btn btn-primary">GENERAR REPORTE PDF</button>
                    </b>

                  </div>
              </div>
          </center>

          </div>


          <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">

            <center>
              <div style=" width: 80%;  padding-top: 10px; padding-left: 15px;">
                 <div  id="Tabla_Enfermeras">
                   <br><br>
                   <h1>ENFERMERAS</h1>
                  <table  class="table table-hover">
                    
                    <thead>
                        <tr class="table-dark">
                            <th>Nombre </th>
                            <th>Apellido </th>
                            <th>Fecha de nacimiento </th>
                            <th>sexo </th>
                            <th>Nombre de usuario </th>
                            <th>Contraseña</th>
                            <th>Telefono</th>
                            <th>Opciones </th>
                        </tr>
                    </thead>
                    <tbody id="CEnfermeras">

                    </tbody>

                </table>
                 </div>
                
                  <div>
                    <b>
                      <button onclick="generarPD()" type="button" class="btn btn-primary">GENERAR REPORTE PDF</button>
                    </b>

                  </div>
              </div>
          </center>


          </div>



          <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">

            <center>
              <div style=" width: 80%;  padding-top: 10px; padding-left: 15px;">
                 <div  id="Tabla_Doctores">
                   <br><br>
                   <h1>DOCTORES</h1>
                  <table  class="table table-hover">
                    
                    <thead>
                        <tr class="table-dark">
                            <th>Nombre </th>
                            <th>Apellido </th>
                            <th>Fecha de nacimiento </th>
                            <th>sexo </th>
                            <th>Nombre de usuario </th>
                            <th>Contraseña</th>
                            <th>Especialidad</th>
                            <th>Telefono</th>
                            <th>Opciones </th>
                        </tr>
                    </thead>
                    <tbody id="CDoctores">

                    </tbody>

                </table>
                 </div>
                
                  <div>
                    <b>
                      <button onclick="generarMe()" type="button" class="btn btn-primary">GENERAR REPORTE PDF</button>
                    </b>

                  </div>
              </div>
          </center>


          </div>

          
          <div class="tab-pane fade" id="medicamento" role="tabpanel" aria-labelledby="medicamento-tab">

            <center>
              <div style=" width: 80%;  padding-top: 10px; padding-left: 15px;">
                 <div  id="Tabla_Medicamentos">
                   <br><br>
                   <h1>MEDICAMENTOS</h1>
                  <table  class="table table-hover">
                    
                    <thead>
                        <tr class="table-dark">
                            <th>Nombre </th>
                            <th>Precio </th>
                            <th>Descripcion </th>
                            <th>Cantidad </th>
                            <th>Opciones</th>
                            
                        </tr>
                    </thead>
                    <tbody id="CMedicamentos">

                    </tbody>

                </table>
                 </div>
                
                  <div>
                    <b>
                      <button onclick="generarmedi()" type="button" class="btn btn-primary">GENERAR REPORTE PDF</button>
                    </b>

                  </div>
              </div>
          </center>

          </div>

         
        </div>
    
    


      <div style=" padding-top: 30px; padding-left: 1050px; ">
        <button type="button" onclick="regresar()" class="btn btn-danger">Regresar</button>
      </div>



    </b>


      

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>


    <!-----------------------------------------PACIENTES------------------------------------------------------->
    
    <script>

        function regresar(){
          location.href="ModuloAdministrador.html"
        }
      function ObtenerPacientes(){

            var tabla = document.querySelector('#detalles')
            var cadena =''

            fetch('https://backend-proyecto2ipc.herokuapp.com/Personas', {
            method: 'GET', 
            headers:{
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',}})

            .then(res => res.json())
            .catch(err => {
                console.error('Error:', err)
                alert("Ocurrio un error, ver la consola")
            })
         
            .then(response =>{
                

                for (var i in response){
             
                    cadena += `<tr>
                        <td> ${response[i].Nombre} </td>
                        <td> ${response[i].Apellido} </td>
                        <td> ${response[i].Nacimiento} </td>
                        <td> ${response[i].Sexo} </td>
                        <td> ${response[i].Username} </td>
                        <td> ${response[i].Contra} </td>
                        <td> ${response[i].Telefono} </td>
                        <td> 
                           
                          <button value=${response[i].Nombre} onclick="VPaciente(this)" type="button" class="btn btn-warning"> <i class="far fa-eye"></i></button> 
                          <button value=${response[i].Nombre} onclick="IrPerfil(this)" type="button" class="btn btn-success"><i class="fas fa-user-edit"></i></button>
                          <button value=${response[i].Nombre} onclick="Eliminar(this)" type="button" class="btn btn-danger"><i class="far fa-trash-alt"></i></button>
                           
                        </td>
                        </tr>` 
                }
                tabla.innerHTML = cadena
            })
        }

        function VPaciente(boton){
          var usuario = boton.value
          sessionStorage.setItem("buscar", usuario)
          location.href="VPacientes.html"
        }

        function IrPerfil(boton){
          var usuario = boton.value
          sessionStorage.setItem("buscar", usuario)
          location.href="MPacientes.html"
        }



             // METODO ELIMINAR
             function Eliminar(boton){
               var usuario = boton.value
              
               fetch(`https://backend-proyecto2ipc.herokuapp.com/Personas/${usuario}`, {
            method: 'DELETE',
            headers:{
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',}})
            .then(res => res.json())
            .catch(err => {
                console.error('Error:', err)
                alert("Ocurrio un error, ver la consola")
            })
            .then(response =>{
                console.log(response);
                alert(response.Mensaje)
                
            })
            
            ObtenerPacientes()
            ObtenerEnfermeras()
            ObtenerDoctores()
            ObtenerMedicamentos()
            }

          </script>
    

    <!-----------------------------------------ENFERMERAS------------------------------------------------------->
    
    <script>

      
    function ObtenerEnfermeras(){

          var tabla = document.querySelector('#CEnfermeras')
          var cadena =''

          fetch('https://backend-proyecto2ipc.herokuapp.com/Enfermera', {
          method: 'GET', 
          headers:{
              'Content-Type': 'application/json',
              'Access-Control-Allow-Origin': '*',}})

          .then(res => res.json())
          .catch(err => {
              console.error('Error:', err)
              alert("Ocurrio un error, ver la consola")
          })
       
          .then(response =>{
              

              for (var i in response){
           
                  cadena += `<tr>
                      <td> ${response[i].Nombre} </td>
                      <td> ${response[i].Apellido} </td>
                      <td> ${response[i].Nacimiento} </td>
                      <td> ${response[i].Sexo} </td>
                      <td> ${response[i].Username} </td>
                      <td> ${response[i].Contra} </td>
                      <td> ${response[i].Telefono} </td>
                      <td> 
                         
                        <button value=${response[i].Nombre} onclick="VEnfermera(this)" type="button" class="btn btn-warning"> <i class="far fa-eye"></i></button>      
                        <button value=${response[i].Nombre} onclick="IrEnfermera(this)" type="button" class="btn btn-success"><i class="fas fa-user-edit"></i></button>
                        <button value=${response[i].Nombre} onclick="EliminarEnfermera(this)" type="button" class="btn btn-danger"><i class="far fa-trash-alt"></i></button>
                         
                      </td>
                      </tr>` 
              }
              tabla.innerHTML = cadena
          })
      }

      function VEnfermera(boton){
          var usuario = boton.value
          sessionStorage.setItem("enfermera", usuario)
          location.href="VEnfermeras.html"
        }

      function IrEnfermera(boton){
        var usuario = boton.value
        sessionStorage.setItem("enfermera", usuario)
        location.href="MEnfermeras2.html"
      }



           // METODO ELIMINAR
           function EliminarEnfermera(boton){
             var usuario = boton.value
            
             fetch(`https://backend-proyecto2ipc.herokuapp.com/Enfermeras/${usuario}`, {
          method: 'DELETE',
          headers:{
              'Content-Type': 'application/json',
              'Access-Control-Allow-Origin': '*',}})
          .then(res => res.json())
          .catch(err => {
              console.error('Error:', err)
              alert("Ocurrio un error, ver la consola")
          })
          .then(response =>{
              console.log(response);
              alert(response.Mensaje)
              
          })
          ObtenerPacientes()
            ObtenerEnfermeras()
            ObtenerDoctores()
            ObtenerMedicamentos()
          }

        </script>



<!-----------------------------------------DOCTORES------------------------------------------------------->
    
<script>

      
  function ObtenerDoctores(){

        var tabla = document.querySelector('#CDoctores')
        var cadena =''

        fetch('https://backend-proyecto2ipc.herokuapp.com/Doctor', {
        method: 'GET', 
        headers:{
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',}})

        .then(res => res.json())
        .catch(err => {
            console.error('Error:', err)
            alert("Ocurrio un error, ver la consola")
        })
     
        .then(response =>{
            

            for (var i in response){
         
                cadena += `<tr>
                  <td> ${response[i].Nombre} </td>
                  <td> ${response[i].Apellido} </td>
                  <td> ${response[i].Nacimiento} </td>
                  <td> ${response[i].Sexo} </td>
                  <td> ${response[i].Username} </td>
                  <td> ${response[i].Contra} </td>
                  <td> ${response[i].Especialidad}</td>
                  <td> ${response[i].Telefono} </td>
                  <td> 
                       
                      <button value=${response[i].Nombre} onclick="VDoctor(this)" type="button" class="btn btn-warning"> <i class="far fa-eye"></i></button>  
                      <button value=${response[i].Nombre} onclick="IrDoctor(this)" type="button" class="btn btn-success"><i class="fas fa-user-edit"></i></button>
                      <button value=${response[i].Nombre} onclick="EliminarDoctor(this)" type="button" class="btn btn-danger"><i class="far fa-trash-alt"></i></button>
                       
                    </td>
                    </tr>` 
            }
            tabla.innerHTML = cadena
        })
    }

    function VDoctor(boton){
          var usuario = boton.value
          sessionStorage.setItem("doctor", usuario)
          location.href="VDoctores.html"
        }

    function IrDoctor(boton){
      var usuario = boton.value
      sessionStorage.setItem("doctor", usuario)
      location.href="MDoctores2.html"
    }



         // METODO ELIMINAR
         function EliminarDoctor(boton){
           var usuario = boton.value
          
           fetch(`https://backend-proyecto2ipc.herokuapp.com/Doctores/${usuario}`, {
        method: 'DELETE',
        headers:{
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',}})
        .then(res => res.json())
        .catch(err => {
            console.error('Error:', err)
            alert("Ocurrio un error, ver la consola")
        })
        .then(response =>{
            console.log(response);
            alert(response.Mensaje)
            
        })
        ObtenerPacientes()
            ObtenerEnfermeras()
            ObtenerDoctores()
            ObtenerMedicamentos()
        }

      </script>


    <!-----------------------------------------MEDICAMENTOS------------------------------------------------------->
    
    <script>

     
    function ObtenerMedicamentos(){

          var tabla = document.querySelector('#CMedicamentos')
          var cadena =''

          fetch('https://backend-proyecto2ipc.herokuapp.com/Medicamentos', {
          method: 'GET', 
          headers:{
              'Content-Type': 'application/json',
              'Access-Control-Allow-Origin': '*',}})

          .then(res => res.json())
          .catch(err => {
              console.error('Error:', err)
              alert("Ocurrio un error, ver la consola")
          })
       
          .then(response =>{
              

              for (var i in response){
           
                  cadena += `<tr>
                      <td> ${response[i].Nombre} </td>
                      <td> ${response[i].Precio} </td>
                      <td> ${response[i].Descripcion} </td>
                      <td> ${response[i].Cantidad} </td>
          
                      <td> 
                         
                        <button value=${response[i].Nombre} onclick="VMedicamento(this)" type="button" class="btn btn-warning"> <i class="far fa-eye"></i></button>      
                        <button value=${response[i].Nombre} onclick="IrMedicamentos(this)" type="button" class="btn btn-success"><i class="fas fa-user-edit"></i></button>
                        <button value=${response[i].Nombre} onclick="EliminarMedicamentos(this)" type="button" class="btn btn-danger"><i class="far fa-trash-alt"></i></button>
                         
                      </td>
                      </tr>` 
              }
              tabla.innerHTML = cadena
          })
      }

      function VMedicamento(boton){
          var usuario = boton.value
          sessionStorage.setItem("medicamento", usuario)
          location.href="VMedicamentos.html"
        }   

      function IrMedicamentos(boton){
        var usuario = boton.value
        sessionStorage.setItem("medicamento", usuario)
        location.href="MMedicamentos.html"
      }



           // METODO ELIMINAR
           function EliminarMedicamentos(boton){
             var usuario = boton.value
            
             fetch(`https://backend-proyecto2ipc.herokuapp.com/Medicamentos/${usuario}`, {
          method: 'DELETE',
          headers:{
              'Content-Type': 'application/json',
              'Access-Control-Allow-Origin': '*',}})
          .then(res => res.json())
          .catch(err => {
              console.error('Error:', err)
              alert("Ocurrio un error, ver la consola")
          })
          .then(response =>{
              console.log(response);
              alert(response.Mensaje)
              
          })
          ObtenerPacientes()
            ObtenerEnfermeras()
            ObtenerDoctores()
            ObtenerMedicamentos()
          }

        </script>
  

    



    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->
  </body>
</html>